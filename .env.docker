# =============================================================================
# Docker Environment Configuration
# =============================================================================
# This file is for Docker deployment only

# =============================================================================
# BITBUCKET CONFIGURATION
# =============================================================================

# Docker Bitbucket credentials
ATLASSIAN_SITE_NAME=docker-company
ATLASSIAN_USER_EMAIL=docker@docker-company.com
ATLASSIAN_API_TOKEN=docker_token

# Docker Bitbucket Server (Alternative)
# BITBUCKET_USERNAME=docker@docker-company.com
# BITBUCKET_API_TOKEN=docker_token
# BITBUCKET_BASE_URL=https://docker-bitbucket.docker-company.com

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker environment
NODE_ENV=production

# Docker transport mode
TRANSPORT_MODE=http

# Docker port
PORT=3000

# Disable debug in Docker
DEBUG=false

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Docker API settings
API_TIMEOUT=30000
API_MAX_RETRIES=3
API_RATE_LIMIT=1000
API_RATE_LIMIT_WINDOW=900000

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable Docker features
ENABLE_ISSUES=true
ENABLE_PIPELINES=true
ENABLE_WEBHOOKS=true
ENABLE_PROJECTS=true
ENABLE_ADVANCED_SEARCH=true

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Docker caching
ENABLE_CACHING=true
CACHE_TTL=300000
CACHE_MAX_SIZE=1000

# Redis configuration (if using Redis)
REDIS_ENABLED=false
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Docker security settings
CORS_ORIGIN=*
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000

# SSL configuration
SSL_ENABLED=false
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Docker logging
LOG_LEVEL=info
LOG_FORMAT=json

# Docker logging settings
ENABLE_REQUEST_LOGGING=true
ENABLE_RESPONSE_LOGGING=false

# Log output
LOG_OUTPUT=stdout
LOG_FILE_PATH=/app/logs/app.log

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Docker performance settings
ENABLE_CONNECTION_POOLING=true
CONNECTION_POOL_SIZE=20
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# Memory settings
MAX_MEMORY=512m
NODE_OPTIONS=--max-old-space-size=512

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Docker monitoring
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_INTERVAL=30000
ENABLE_METRICS=true
METRICS_PORT=9090

# Health check endpoints
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5000

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Docker deployment settings
CLUSTER_MODE=true
WORKER_PROCESSES=4
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# Container settings
CONTAINER_NAME=bitbucket-mcp-server
CONTAINER_IMAGE=bitbucket-mcp-server:latest
CONTAINER_TAG=latest

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================

# Docker scaling
LOAD_BALANCER_ENABLED=true
AUTO_SCALING_ENABLED=true
MIN_REPLICAS=2
MAX_REPLICAS=10

# Resource limits
CPU_LIMIT=1000m
MEMORY_LIMIT=1Gi
CPU_REQUEST=500m
MEMORY_REQUEST=512Mi

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Docker network settings
NETWORK_MODE=bridge
NETWORK_NAME=bitbucket-mcp-server-network
EXTERNAL_PORT=3000
INTERNAL_PORT=3000

# Proxy settings
NGINX_ENABLED=true
NGINX_PORT=80
NGINX_SSL_PORT=443

# =============================================================================
# VOLUME CONFIGURATION
# =============================================================================

# Docker volumes
VOLUME_ENABLED=true
LOG_VOLUME_PATH=/app/logs
CONFIG_VOLUME_PATH=/app/config
DATA_VOLUME_PATH=/app/data

# Volume permissions
VOLUME_USER=nodejs
VOLUME_GROUP=nodejs
VOLUME_UID=1001
VOLUME_GID=1001

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Docker backup
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/app/backups

# =============================================================================
# ALERTING
# =============================================================================

# Docker alerting
ALERTING_ENABLED=true
ALERT_EMAIL=docker-alerts@yourdomain.com
ALERT_WEBHOOK=https://docker.yourdomain.com/alerts

# Alert thresholds
ALERT_ERROR_THRESHOLD=5
ALERT_RESPONSE_TIME_THRESHOLD=5000
ALERT_MEMORY_THRESHOLD=80
ALERT_CPU_THRESHOLD=80

# =============================================================================
# COMPLIANCE
# =============================================================================

# Docker compliance
AUDIT_LOGGING_ENABLED=true
DATA_RETENTION_DAYS=90
PRIVACY_MODE_ENABLED=true

# =============================================================================
# INTEGRATION
# =============================================================================

# Docker integrations
SLACK_WEBHOOK=https://hooks.slack.com/services/docker
TEAMS_WEBHOOK=https://docker.webhook.office.com/webhook

# External services
EXTERNAL_API_URL=https://docker-api.yourdomain.com
EXTERNAL_API_TIMEOUT=10000

# =============================================================================
# MONITORING
# =============================================================================

# Docker monitoring
MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=30000

# Performance monitoring
PERFORMANCE_MONITORING_ENABLED=true
SLOW_QUERY_THRESHOLD=1000
ERROR_RATE_THRESHOLD=0.05

# =============================================================================
# DOCKER SPECIFIC
# =============================================================================

# Docker health check
DOCKER_HEALTH_CHECK_ENABLED=true
DOCKER_HEALTH_CHECK_INTERVAL=30s
DOCKER_HEALTH_CHECK_TIMEOUT=10s
DOCKER_HEALTH_CHECK_RETRIES=3
DOCKER_HEALTH_CHECK_START_PERIOD=40s

# Docker restart policy
DOCKER_RESTART_POLICY=unless-stopped

# Docker user
DOCKER_USER=nodejs
DOCKER_UID=1001
DOCKER_GID=1001